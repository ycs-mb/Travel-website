# Activity Diagrams & Workflow Visualization

---

## Complete Workflow Activity Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Travel Photo Organization Workflow                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ START: Workflow Initialization          â”‚
        â”‚ â€¢ Load config.yaml                      â”‚
        â”‚ â€¢ Load .env variables                   â”‚
        â”‚ â€¢ Setup logging                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Input: Load Image Files                 â”‚
        â”‚ â€¢ Scan input directory                  â”‚
        â”‚ â€¢ Filter by format (JPG, PNG, HEIC)     â”‚
        â”‚ â€¢ Count total images                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ STAGE 1: METADATA EXTRACTION            â”‚
        â”‚ Agent 1                                 â”‚
        â”‚ â€¢ Extract EXIF data                     â”‚
        â”‚ â€¢ Parse GPS coordinates                 â”‚
        â”‚ â€¢ Read camera settings                  â”‚
        â”‚ â€¢ Identify problematic images           â”‚
        â”‚ Parallel: 4 workers                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Validate Agent 1 Output                 â”‚
        â”‚ â€¢ Check schema compliance               â”‚
        â”‚ â€¢ Verify required fields                â”‚
        â”‚ â€¢ Log any validation errors             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Validation OK?  â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                     â”‚       â”‚
                  Yesâ”‚       â”‚No
                     â”‚       â–¼
                     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   â”‚ Log Warning         â”‚
                     â”‚   â”‚ Continue with partial
                     â”‚   â”‚ results             â”‚
                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚            â”‚
                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ STAGE 2: PARALLEL ASSESSMENT            â”‚
        â”‚ Agents 2 & 3 Run Concurrently           â”‚
        â”‚                                         â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚ â”‚ Agent 2: Quality Assessment       â”‚   â”‚
        â”‚ â”‚ â€¢ Analyze sharpness               â”‚   â”‚
        â”‚ â”‚ â€¢ Check exposure levels           â”‚   â”‚
        â”‚ â”‚ â€¢ Detect noise                    â”‚   â”‚
        â”‚ â”‚ â€¢ Score 1-5                       â”‚   â”‚
        â”‚ â”‚ Parallel: 2 workers               â”‚   â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                 â”‚                       â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚ â”‚ Agent 3: Aesthetic Assessment     â”‚   â”‚
        â”‚ â”‚ â€¢ Evaluate composition            â”‚   â”‚
        â”‚ â”‚ â€¢ Rate framing                    â”‚   â”‚
        â”‚ â”‚ â€¢ Assess lighting quality         â”‚   â”‚
        â”‚ â”‚ â€¢ Score 1-5 (VLM API)             â”‚   â”‚
        â”‚ â”‚ Parallel: 2 workers               â”‚   â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                 â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    [Wait for both to complete]
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Validate Agents 2 & 3 Outputs           â”‚
        â”‚ â€¢ Check score ranges (1-5)              â”‚
        â”‚ â€¢ Verify all images processed           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Validation OK?  â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                     â”‚       â”‚
                  Yesâ”‚       â”‚No
                     â”‚       â–¼
                     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   â”‚ Assign default      â”‚
                     â”‚   â”‚ scores to failed    â”‚
                     â”‚   â”‚ images              â”‚
                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚            â”‚
                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ STAGE 3: PARALLEL ENRICHMENT            â”‚
        â”‚ Agents 4 & 5 Run Concurrently           â”‚
        â”‚                                         â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚ â”‚ Agent 4: Filtering & Categorization
        â”‚ â”‚ â€¢ Apply quality threshold          â”‚   â”‚
        â”‚ â”‚ â€¢ Categorize by content            â”‚   â”‚
        â”‚ â”‚ â€¢ Extract location from GPS        â”‚   â”‚
        â”‚ â”‚ â€¢ Generate tags                    â”‚   â”‚
        â”‚ â”‚ Parallel: 2 workers                â”‚   â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                 â”‚                       â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚ â”‚ Agent 5: Caption Generation       â”‚   â”‚
        â”‚ â”‚ â€¢ Generate concise caption         â”‚   â”‚
        â”‚ â”‚ â€¢ Write standard caption           â”‚   â”‚
        â”‚ â”‚ â€¢ Compose detailed caption         â”‚   â”‚
        â”‚ â”‚ â€¢ Extract keywords (LLM)           â”‚   â”‚
        â”‚ â”‚ Parallel: 2 workers                â”‚   â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                 â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    [Wait for both to complete]
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Validate Agents 4 & 5 Outputs           â”‚
        â”‚ â€¢ Check category values                 â”‚
        â”‚ â€¢ Verify caption lengths                â”‚
        â”‚ â€¢ Validate keyword format               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Validation OK?  â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                     â”‚       â”‚
                  Yesâ”‚       â”‚No
                     â”‚       â–¼
                     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   â”‚ Use fallback        â”‚
                     â”‚   â”‚ values              â”‚
                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚            â”‚
                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ STAGE 4: REPORTING & ANALYSIS           â”‚
        â”‚ â€¢ Aggregate all validations             â”‚
        â”‚ â€¢ Calculate statistics                  â”‚
        â”‚ â€¢ Generate final_report.json            â”‚
        â”‚ â€¢ Create error registry                 â”‚
        â”‚ â€¢ Calculate execution time              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ OUTPUT: Save All Results                â”‚
        â”‚ â€¢ Write agent reports to output/        â”‚
        â”‚ â€¢ Save logs to output/logs/             â”‚
        â”‚ â€¢ Write final report                    â”‚
        â”‚ â€¢ Deploy website files                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SUCCESS: Workflow Complete              â”‚
        â”‚ Status: All outputs generated           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Agent Execution Timeline

```
Timeline: Parallel Execution of 150 Images

Time (minutes)
0        â”‚
         â”‚  Agent 1: Metadata Extraction
         â”‚  [4 workers, I/O bound]  ~2 min
         â”‚
2        â”‚
         â”‚  Agent 2: Quality          â”
         â”‚  [2 workers, CPU]  â”€â”      â”‚
         â”‚  ~3 min             â”œâ”€â”€â†’ Agent 4 & 5: Parallel
         â”‚                     â”‚      â”‚ Filtering & Captions
         â”‚  Agent 3: Aesthetic â”‚      â”‚ ~4 min
         â”‚  [2 workers, VLM]  â”€â”˜      â”‚
         â”‚  ~5 min                    â”˜
         â”‚
6        â”‚
         â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚ Final Reporting & Save   â”‚
         â”‚                     â”‚ ~1 min                   â”‚
         â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
7        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Total Estimated Time: ~7-8 minutes for 150 images
(with parallel optimization)
```

---

## Single Image Processing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Processing One Image Through All Stages          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Image Input: photo.jpg
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 1: Metadata              â”‚
â”‚ extract_exif() â”€â†’              â”‚
â”‚ parse_gps() â”€â†’                 â”‚
â”‚ read_camera_settings() â”€â†’      â”‚
â”‚ validate_output() â”€â†’           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    Metadata Output
    {
      image_id, filename,
      gps, camera_settings,
      capture_datetime
    }
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚              â”‚
         â–¼              â–¼              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚   Agent 2   â”‚ â”‚  Agent 3   â”‚    â”‚
    â”‚   Quality   â”‚ â”‚ Aesthetic  â”‚    â”‚
    â”‚   â†“         â”‚ â”‚    â†“       â”‚    â”‚
    â”‚ Quality     â”‚ â”‚ Aesthetic  â”‚    â”‚
    â”‚ Score: 4/5  â”‚ â”‚ Score: 4/5 â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
           â”‚              â”‚           â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                  â–¼                   â”‚
         Quality & Aesthetic Data    â”‚
                  â”‚                   â”‚
                  â”‚ (combined)        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
                â–¼                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Agent 4:       â”‚ â”‚   Agent 5:       â”‚
         â”‚   Filtering      â”‚ â”‚   Captions       â”‚
         â”‚                  â”‚ â”‚                  â”‚
         â”‚ Categorize       â”‚ â”‚ Generate:        â”‚
         â”‚ â”œâ”€ Landscape    â”‚ â”‚ â”œâ”€ Concise       â”‚
         â”‚ â”œâ”€ Golden Hour  â”‚ â”‚ â”œâ”€ Standard      â”‚
         â”‚ â”œâ”€ Location: CA â”‚ â”‚ â”œâ”€ Detailed      â”‚
         â”‚ â””â”€ Pass filter? â”‚ â”‚ â””â”€ Keywords      â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
            Full Image Record (organized & labeled)
```

---

## Error Recovery Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent Processing with Error Handling â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Load image file â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BEGIN TRY BLOCK    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Process Image                 â”‚
    â”‚ â€¢ Extract data/features        â”‚
    â”‚ â€¢ Compute metrics              â”‚
    â”‚ â€¢ Run inference (if needed)    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Validate Output                â”‚
    â”‚ â€¢ Check schema                 â”‚
    â”‚ â€¢ Verify ranges                â”‚
    â”‚ â€¢ Ensure required fields       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Success?                       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚
      YESâ”‚          â”‚NO
         â”‚          â–¼
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚ EXCEPTION CAUGHT     â”‚
         â”‚    â”‚ Caught exceptions:    â”‚
         â”‚    â”‚ â€¢ APIError            â”‚
         â”‚    â”‚ â€¢ FileNotFoundError   â”‚
         â”‚    â”‚ â€¢ ValidationError     â”‚
         â”‚    â”‚ â€¢ ProcessingError     â”‚
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚ Categorize Error      â”‚
         â”‚    â”‚ Determine severity:    â”‚
         â”‚    â”‚ â€¢ info/warning/error  â”‚
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚ Log Error             â”‚
         â”‚    â”‚ â†’ ERROR_LOG global    â”‚
         â”‚    â”‚ â†’ workflow.log        â”‚
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    â”‚ Create Default Result â”‚
         â”‚    â”‚ with error flag       â”‚
         â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
              â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Return Result             â”‚
         â”‚ (success or placeholder)  â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Continue to Next Image    â”‚
         â”‚ (if continue_on_error)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Error Handling Strategy:
â€¢ Try to process every image
â€¢ Log errors with context
â€¢ Assign default results on failure
â€¢ Mark images with error flags
â€¢ Collect all errors for final report
```

---

## Configuration Decision Tree

```
START: Load Configuration
    â”‚
    â”œâ”€ config.yaml exists?
    â”‚  â”œâ”€ YES: Parse YAML
    â”‚  â”‚       â”‚
    â”‚  â”‚       â”œâ”€ Validate schema
    â”‚  â”‚       â”‚  â”œâ”€ VALID: Proceed
    â”‚  â”‚       â”‚  â””â”€ INVALID: Log error, use defaults
    â”‚  â”‚
    â”‚  â””â”€ NO: Use default config
    â”‚
    â”œâ”€ .env file exists?
    â”‚  â”œâ”€ YES: Load environment variables
    â”‚  â”‚       â”‚
    â”‚  â”‚       â”œâ”€ OPENAI_API_KEY set?
    â”‚  â”‚       â”‚  â”œâ”€ YES: Enable GPT-4 Vision agents
    â”‚  â”‚       â”‚  â””â”€ NO: Use simulated mode
    â”‚  â”‚       â”‚
    â”‚  â”‚       â””â”€ GOOGLE_API_KEY set?
    â”‚  â”‚          â”œâ”€ YES: Enable Gemini agents
    â”‚  â”‚          â””â”€ NO: Use simulated mode
    â”‚  â”‚
    â”‚  â””â”€ NO: Log warning, API calls will fail
    â”‚
    â”œâ”€ input_images directory exists?
    â”‚  â”œâ”€ YES: Scan for images
    â”‚  â”‚       â”‚
    â”‚  â”‚       â”œâ”€ Images found? â”€â”€â†’ Continue
    â”‚  â”‚       â””â”€ No images? â”€â”€â”€â”€â†’ Exit with error
    â”‚  â”‚
    â”‚  â””â”€ NO: Create directory, exit with error
    â”‚
    â””â”€ Create output directories
       â””â”€ READY: Start workflow
```

---

## Data Aggregation Flow

```
Individual Agent Outputs          Final Aggregation
    â”‚                                    â–²
    â”œâ”€ Agent 1: metadata_extraction      â”‚
    â”‚  â””â”€ List[Dict] 150 items â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚                                  â”‚  â”‚
    â”œâ”€ Agent 2: quality_assessment     â”‚  â”‚
    â”‚  â””â”€ List[Dict] 150 items â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”¼â”€ Merge on image_id
    â”‚                                  â”‚  â”‚
    â”œâ”€ Agent 3: aesthetic_assessment   â”‚  â”‚
    â”‚  â””â”€ List[Dict] 150 items â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”¼â”€ Preserve all fields
    â”‚                                  â”‚  â”‚
    â”œâ”€ Agent 4: duplicate_detection    â”‚  â”‚
    â”‚  â””â”€ List[Dict] groups â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    â”‚                                  â”‚  â”‚
    â”œâ”€ Agent 5: filtering_categorization
    â”‚  â””â”€ List[Dict] 150 items â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    â”‚                                  â”‚  â”‚
    â”œâ”€ Agent 6: caption_generation     â”‚  â”‚
    â”‚  â””â”€ List[Dict] 150 items â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    â”‚                                  â”‚  â”‚
    â””â”€ Agent 7: website_generation     â”‚  â”‚
       â””â”€ Files & JSON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                          â–¼
                                  Unified Report:
                                  â€¢ All 150 images
                                  â€¢ All agent outputs
                                  â€¢ Complete metadata
                                  â€¢ Statistics
                                  â€¢ Error registry
```

---

## Logging & Observability Flow

```
All Agents During Execution
    â”‚
    â”œâ”€ Processing events
    â”‚  â””â”€ log_info(...) â†’ ğŸ“ workflow.log
    â”‚
    â”œâ”€ Warnings (continue)
    â”‚  â””â”€ log_warning(...) â†’ ğŸ“ workflow.log
    â”‚                       â†’ ğŸ”´ ERROR_LOG global
    â”‚
    â”œâ”€ Errors (continue with placeholder)
    â”‚  â””â”€ log_error(...) â†’ ğŸ“ workflow.log
    â”‚                    â†’ ğŸ”´ ERROR_LOG global
    â”‚                    â†’ ğŸ“‹ errors.json
    â”‚
    â””â”€ Critical (stop workflow)
       â””â”€ log_critical(...) â†’ ğŸ“ workflow.log
                            â†’ ğŸ”´ ERROR_LOG global
                            â†’ ğŸ›‘ Exit

Error Registry (accumulated):
    â”‚
    â””â”€ ERROR_LOG = [
         {timestamp, agent, error_type, summary, severity, details},
         {timestamp, agent, error_type, summary, severity, details},
         ...
       ]

Final Reporting:
    â”‚
    â”œâ”€ output/logs/workflow.log â† All structured logs
    â”œâ”€ output/logs/errors.json â† Error registry (JSON)
    â”œâ”€ output/reports/validations.json â† Agent validation summaries
    â””â”€ output/reports/final_report.json â† Statistics + error summary
```

---

**For high-level overview, see [HLD.md](./HLD.md)**
**For detailed specifications, see [LLD.md](./LLD.md)**
**For architecture diagrams, see [UML_DIAGRAMS.md](./UML_DIAGRAMS.md)**
**For quick setup, see [QUICKSTART.md](./QUICKSTART.md)**
